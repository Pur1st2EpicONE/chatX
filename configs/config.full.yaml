# Docker environment flag
docker: true                                      # Indicates containerized run; getenv errors are suppressed (envs come from docker-compose)

# Logger configuration
logger:
  log_directory: ./logs                           # Directory for logs, must be mounted via docker-compose volume; if empty, logs are written to stdout
  debug_mode: false                               # Enable debug-level logging
  request_logging: false                          # Enable logging for each HTTP request

# HTTP server configuration
server:
  port: "8080"                                    # Port where the HTTP server listens; must match the exposed port in docker-compose.full.yaml
  read_timeout: 5s                                # Maximum duration for reading the entire request
  write_timeout: 10s                              # Maximum duration before timing out response writes
  max_header_bytes: 1048576                       # Maximum size of request headers in bytes
  shutdown_timeout: 10s                           # Timeout for graceful server shutdown

# Service limits
service:
  max_message_length: 5000                        # Maximum allowed length of message text
  max_title_length: 200                           # Maximum allowed length of chat title
  get_limit_max: 100                              # Maximum number of messages returned
  get_limit_default: 20                           # Default number of messages if limit not specified

# Cache configuration
cache:
  capacity: 5                                     # Maximum number of chats stored in cache
  max_messages: 5                                 # Maximum number of messages stored per chat in cache

# Database (PostgreSQL) configuration
database:
  goose_dialect: "postgres"                       # Dialect used by goose migrations
  goose_migrations_directory: "./migrations"      # Directory containing migration files
  host: postgres                                  # Database host
  port: "5432"                                    # Database port; must match the exposed port in docker-compose.full.yaml
  dbname: chatX-db                                # Database name
  sslmode: disable                                # SSL mode for database connection
  max_open_conns: 20                              # Maximum number of open database connections
  max_idle_conns: 10                              # Maximum number of idle connections
  conn_max_lifetime: 30m                          # Maximum lifetime of a database connection