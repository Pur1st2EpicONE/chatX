# Docker environment flag
docker: true                                   # Indicates containerized run; getenv errors are suppressed (envs come from docker-compose)

# Logger configuration
logger:
  log_directory:                         # Directory for logs, must be mounted via docker-compose volume; if empty, logs are written to stdout
  debug_mode: true                             # Enable debug-level logging

# HTTP server configuration
server:
  port: "8081"                                 # Port where the HTTP server listens; must match the exposed port in docker-compose.full.yaml
  read_timeout: 5s                             # Maximum duration for reading the entire request
  write_timeout: 10s                           # Maximum duration before timing out response writes
  max_header_bytes: 1048576                    # Maximum size of request headers in bytes
  shutdown_timeout: 10s                        # Timeout for graceful server shutdown

cache:
  capacity: 3
  max_messages: 2

# Database (PostgreSQL) configuration
database:
  goose_dialect: "postgres"
  goose_migrations_directory: "./migrations"
  host: postgres-test                               # Database host
  port: "5432"                                 # Database port; must match the exposed port in docker-compose.full.yaml
  dbname: postgres-test                           # Database name
  sslmode: disable                             # SSL mode for database connection
  max_open_conns: 20                           # Maximum number of open database connections
  max_idle_conns: 10                           # Maximum number of idle connections
  conn_max_lifetime: 30m                       # Maximum lifetime of a database connection
  recover_limit: 1000                          # Max number of notifications to recover and re-queue after DB/broker outage
